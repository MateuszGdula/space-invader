!function(t){var s={};function e(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)e.d(i,h,function(s){return t[s]}.bind(null,h));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s);let i=document.querySelector(".game");const h={ctx:i.getContext("2d"),w:i.width,h:i.height};var a=class{constructor(t,s,e){this.ctx=t,this.asset=s,this.speed=e,this.x=0}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.asset,this.x,0),this.ctx.drawImage(this.asset,this.x+SI_GAME.data.w,0),this.ctx.closePath(),this.x>-1*SI_GAME.data.w?this.x-=this.speed:this.x=0}};class r extends EventTarget{constructor(t,s,e,i){super(),this.setVars(t,s,e,i),this.setListeners()}setVars(t,s,e,i){this.ctx=t,this.img=s,this.speed=e,this.health=i,this.x=10,this.y=SI_GAME.data.h/2,this.w=100,this.h=33,this.rightPressed=!1,this.leftPressed=!1,this.upPressed=!1,this.downPressed=!1,this.reload=!1,this.weapon={asset:SI_GAME.assets.missle1,damage:20,speed:4}}setListeners(){this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler),this.keyUpHandler=this.keyUpHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler)}keyDownHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!0),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!0),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!0),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!0)," "===t.key&&this.shot()}keyUpHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!1),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!1),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!1),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!1)}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h),this.ctx.closePath(),this.update()}update(){this.rightPressed&&this.x+this.w<SI_GAME.data.w&&(this.x+=this.speed),this.leftPressed&&this.x>0&&(this.x-=this.speed),this.downPressed&&this.y+this.h<SI_GAME.data.h&&(this.y+=this.speed),this.upPressed&&this.y>0&&(this.y-=this.speed)}shot(){if(this.reload)return;let t=new Event("shot");t.x=this.x+this.w,t.y=this.y+Math.round(this.h/2),t.asset=this.weapon.asset,t.speed=this.weapon.speed,t.dmg=this.weapon.damage,this.dispatchEvent(t),this.reload=!0,setTimeout(()=>this.reload=!1,100)}}var n=r;class d extends EventTarget{constructor(t,s,e,i,h){super(),this.setVars(t,s,e,i,h)}setVars(t,s,e,i,h){this.ctx=t,this.img=s,this.speed=h,this.x=e,this.y=i,this.w=13,this.h=5}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y),this.ctx.closePath(),this.update()}update(){if(this.x+=this.speed,this.x+this.w>SI_GAME.data.w||this.x<0||this.y+this.h>SI_GAME.data.h||this.y<0){let t=new Event("remove");this.dispatchEvent(t)}}}var o=d;class l extends EventTarget{constructor(t,s,e,i,h){super(),this.setVars(t,s,e,i,h),this.setListeners()}setVars(t,s,e,i,h){this.ctx=t,this.img=s,this.speed=e,this.health=i,this.x=SI_GAME.data.w,this.y=SI_GAME.data.h/2,this.w=100,this.h=33,this.reload=!1,this.playerShip=h,this.weapon={asset:SI_GAME.assets.missle_a1,damage:20,speed:3}}setListeners(){}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h),this.ctx.closePath(),this.update()}update(){this.x-=this.speed,this.playerShip.y+this.playerShip.h/2>this.y+this.h/2?this.y+=this.speed/2:this.y-=this.speed/2,this.playerShip.y<this.y+this.h/2&&this.playerShip.y+this.playerShip.h>this.y+this.h/2&&this.shot()}shot(){if(console.log("shot"),this.reload)return;let t=new Event("shot");t.asset=this.weapon.asset,t.x=this.x,t.y=this.y+Math.round(this.h/2),t.speed=-1*this.weapon.speed,this.dispatchEvent(t),this.reload=!0,setTimeout(()=>this.reload=!1,1e3)}}var p=l;var c=class{constructor(){this.setVars(),this.setListeners(),this.start()}setVars(){this.ctx=SI_GAME.data.ctx,this.bg=new a(this.ctx,SI_GAME.assets.bg,.5),this.ship=new n(this.ctx,SI_GAME.assets.ship,2,100),this.aliens=[],this.missles=[]}setListeners(){this.handleShot=this.handleShot.bind(this),this.ship.addEventListener("shot",this.handleShot)}start(){this.drawFrame();let t=new p(this.ctx,SI_GAME.assets.alien1,1.2,100,this.ship);console.log(t),this.aliens.push(t),t.addEventListener("shot",this.handleShot.bind(this))}pause(){}stop(){}reset(){}drawFrame(){this.ctx.clearRect(0,0,SI_GAME.data.w,SI_GAME.data.h),this.bg.draw(),this.ship.draw(),this.missles.forEach(t=>t.draw()),this.aliens.forEach(t=>t.draw()),requestAnimationFrame(()=>this.drawFrame())}handleShot(t){let s=new o(this.ctx,t.asset,t.x,t.y,t.speed,SI_GAME.data);this.missles.push(s);let e=t=>{this.missles.splice(this.missles.indexOf(s),1),s.removeEventListener("remove",e)};s.addEventListener("remove",e)}};(function(t){return new Promise((s,e)=>{let i=Object.keys(t).length;const h={};for(let e in t)h[e]=new Image,h[e].onload=()=>{0===--i&&s(h)},h[e].src=t[e]})})({bg:"./assets/bg.png",ship:"./assets/ship.png",missle1:"./assets/missle1.png",alien1:"./assets/ship_a1.png",missle_a1:"./assets/missle_a1.png"}).then(t=>{const s={};s.assets=t,s.data=h,window.SI_GAME=s,new c})}]);