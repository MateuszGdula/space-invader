!function(t){var s={};function e(i){if(s[i])return s[i].exports;var h=s[i]={i:i,l:!1,exports:{}};return t[i].call(h.exports,h,h.exports,e),h.l=!0,h.exports}e.m=t,e.c=s,e.d=function(t,s,i){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var h in t)e.d(i,h,function(s){return t[s]}.bind(null,h));return i},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=0)}([function(t,s,e){"use strict";e.r(s),window.SI_CANVAS=document.querySelector(".game"),window.SI_CTX=SI_CANVAS.getContext("2d");const i={w:SI_CANVAS.width,h:SI_CANVAS.height};var h=class{constructor(t,s,e,i){this.ctx=t,this.img=s,this.speed=e,this.cfg=i,this.x=0}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,0),this.ctx.drawImage(this.img,this.x+this.cfg.w,0),this.ctx.closePath(),this.x>-1*this.cfg.w?this.x-=this.speed:this.x=0}};class r extends EventTarget{constructor(t,s,e,i){super(),this.setVars(t,s,e,i),this.setListeners()}setVars(t,s,e,i){this.ctx=t,this.img=s,this.speed=e,this.cfg=i,this.x=10,this.y=this.cfg.h/2,this.w=100,this.h=33,this.rightPressed=!1,this.leftPressed=!1,this.upPressed=!1,this.downPressed=!1,this.reload=!1}setListeners(){this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler),this.keyUpHandler=this.keyUpHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler)}keyDownHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!0),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!0),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!0),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!0)," "===t.key&&this.shot()}keyUpHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!1),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!1),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!1),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!1)}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h),this.ctx.closePath(),this.update()}update(){this.rightPressed&&this.x+this.w<this.cfg.w&&(this.x+=this.speed),this.leftPressed&&this.x>0&&(this.x-=this.speed),this.downPressed&&this.y+this.h<this.cfg.h&&(this.y+=this.speed),this.upPressed&&this.y>0&&(this.y-=this.speed)}shot(){if(this.reload)return;let t=new Event("shot");t.x=this.x+this.w,t.y=this.y+Math.round(this.h/2),this.dispatchEvent(t),this.reload=!0,setTimeout(()=>this.reload=!1,100)}}var n=r;class a extends EventTarget{constructor(t,s,e,i,h,r){super(),this.setVars(t,s,e,i,h,r)}setVars(t,s,e,i,h,r){this.ctx=t,this.img=s,this.speed=h,this.cfg=r,this.x=e,this.y=i,this.w=13,this.h=5}draw(){return this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y),this.ctx.closePath(),this.update()}update(){if(this.x+=this.speed,this.x+this.w>this.cfg.w||this.x<0||this.y+this.h>this.cfg.h||this.y<0)return!0}}var o=a;var d=class{constructor(t){this.setVars(t),this.setListeners(),this.start()}setVars(t){this.assets=t,this.ctx=SI_CTX,this.cfg=i,this.bg=new h(this.ctx,this.assets.bg,.5,this.cfg),this.ship=new n(this.ctx,this.assets.ship,2,this.cfg),this.missles=[]}setListeners(){this.ship.addEventListener("shot",t=>this.missles.push(new o(this.ctx,this.assets.missle1,t.x,t.y,4,this.cfg)))}start(){this.drawFrame()}pause(){}stop(){}reset(){}drawFrame(){this.ctx.clearRect(0,0,this.cfg.w,this.cfg.h),this.bg.draw(),this.ship.draw(),this.missles.forEach((t,s)=>{t.draw()&&this.missles.splice(s,1)}),requestAnimationFrame(()=>this.drawFrame())}};(async function(t){return new Promise((s,e)=>{let i=Object.keys(t).length;const h={};for(let e in t)h[e]=new Image,h[e].onload=()=>{0===--i&&s(h)},h[e].src=t[e]})})({bg:"./assets/bg.png",ship:"./assets/ship.png",missle1:"./assets/missle1.png"}).then(t=>{new d(t)})}]);