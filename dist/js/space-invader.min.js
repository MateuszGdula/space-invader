!function(e){var t={};function s(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t,s){var i=s(1);"string"==typeof i&&(i=[[e.i,i,""]]);var n={insert:"head",singleton:!1};s(2)(i,n);i.locals&&(e.exports=i.locals)},function(e,t,s){},function(e,t,s){"use strict";var i,n={},h=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},a=function(){var e={};return function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}e[t]=s}return e[t]}}();function r(e,t){for(var s=[],i={},n=0;n<e.length;n++){var h=e[n],a=t.base?h[0]+t.base:h[0],r={css:h[1],media:h[2],sourceMap:h[3]};i[a]?i[a].parts.push(r):s.push(i[a]={id:a,parts:[r]})}return s}function o(e,t){for(var s=0;s<e.length;s++){var i=e[s],h=n[i.id],a=0;if(h){for(h.refs++;a<h.parts.length;a++)h.parts[a](i.parts[a]);for(;a<i.parts.length;a++)h.parts.push(x(i.parts[a],t))}else{for(var r=[];a<i.parts.length;a++)r.push(x(i.parts[a],t));n[i.id]={id:i.id,refs:1,parts:r}}}}function d(e){var t=document.createElement("style");if(void 0===e.attributes.nonce){var i=s.nc;i&&(e.attributes.nonce=i)}if(Object.keys(e.attributes).forEach((function(s){t.setAttribute(s,e.attributes[s])})),"function"==typeof e.insert)e.insert(t);else{var n=a(e.insert||"head");if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(t)}return t}var l,c=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function p(e,t,s,i){var n=s?"":i.css;if(e.styleSheet)e.styleSheet.cssText=c(t,n);else{var h=document.createTextNode(n),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(h,a[t]):e.appendChild(h)}}function u(e,t,s){var i=s.css,n=s.media,h=s.sourceMap;if(n&&e.setAttribute("media",n),h&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(h))))," */")),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var m=null,y=0;function x(e,t){var s,i,n;if(t.singleton){var h=y++;s=m||(m=d(t)),i=p.bind(null,s,h,!1),n=p.bind(null,s,h,!0)}else s=d(t),i=u.bind(null,s,t),n=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(s)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}e.exports=function(e,t){(t=t||{}).attributes="object"==typeof t.attributes?t.attributes:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=h());var s=r(e,t);return o(s,t),function(e){for(var i=[],h=0;h<s.length;h++){var a=s[h],d=n[a.id];d&&(d.refs--,i.push(d))}e&&o(r(e,t),t);for(var l=0;l<i.length;l++){var c=i[l];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete n[c.id]}}}}},function(e,t,s){"use strict";s.r(t);s(0);const i=document.querySelector(".game"),n=i.offsetHeight;i.width=Math.round(1.77*n),i.height=n;const h={ctx:i.getContext("2d"),w:i.width,h:i.height,isMobile:/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)};var a=class{constructor(e,{asset:t,speed:s}){this.ctx=e,this.asset=t,this.speed=s,this.x=0,this.w=SI_GAME.data.w,this.h=SI_GAME.data.h}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.asset,this.x,0,this.w,this.h),this.ctx.drawImage(this.asset,this.x+SI_GAME.data.w,0,this.w,this.h),this.ctx.closePath(),this.x>-1*SI_GAME.data.w?this.x-=this.speed:this.x=0}};class r extends EventTarget{constructor(e,t){super(),this.setVars(e,t),this.addWeapon(SI_GAME.weapons[0]),this.setListeners()}setVars(e,{asset:t,speed:s,shield:i}){this.ctx=e,this.asset=t,this.speed=s,this.shield=i,this.w=.08*SI_GAME.data.w,this.h=.06*SI_GAME.data.h,this.x=10,this.y=SI_GAME.data.h/2,this.alpha=1,this.moveRight=!1,this.moveLeft=!1,this.moveUp=!1,this.moveDown=!1,this.reload=!1,this.weapons=[],this.eqWeapon=null}setListeners(){SI_GAME.data.isMobile?(this.shot=this.shot.bind(this),document.addEventListener("click",this.shot),this.swipesHandler=this.swipesHandler.bind(this),document.addEventListener("touchmove",this.swipesHandler),document.addEventListener("touchstart",e=>{this.touchX=this.x,this.touchY=this.y}),document.addEventListener("touchend",e=>{this.moveUp=this.moveDown=this.moveRight=this.moveLeft=!1})):(this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler),this.keyUpHandler=this.keyUpHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler))}swipesHandler(e){let t=e.touches[0];t.clientX>this.touchX&&(this.moveRight=!0),t.clientX<this.touchX&&(this.moveLeft=!0),t.clientY<this.touchY&&(this.moveUp=!0),t.clientY>this.touchY&&(this.moveDown=!0),e.touches.length>1&&this.shot(),this.touchX=t.clientX,this.touchY=t.clientY}keyDownHandler(e){("Right"==e.key||"ArrowRight"==e.key)&&(this.moveRight=!0),("Left"==e.key||"ArrowLeft"==e.key)&&(this.moveLeft=!0),("Up"==e.key||"ArrowUp"==e.key)&&(this.moveUp=!0),("Down"==e.key||"ArrowDown"==e.key)&&(this.moveDown=!0)," "===e.key&&this.shot()}keyUpHandler(e){("Right"==e.key||"ArrowRight"==e.key)&&(this.moveRight=!1),("Left"==e.key||"ArrowLeft"==e.key)&&(this.moveLeft=!1),("Up"==e.key||"ArrowUp"==e.key)&&(this.moveUp=!1),("Down"==e.key||"ArrowDown"==e.key)&&(this.moveDown=!1)}addWeapon(e){const t={...e};this.weapons.push(t),this.eqWeapon=t}draw(){this.ctx.beginPath(),this.ctx.globalAlpha=this.alpha,this.ctx.drawImage(this.asset,this.x,this.y,this.w,this.h),this.ctx.globalAlpha=1,this.ctx.closePath(),this.update()}update(){this.shield<=0&&this.shipExplosion(),this.moveRight&&this.x+this.w<SI_GAME.data.w&&(this.x+=this.speed),this.moveLeft&&this.x>0&&(this.x-=this.speed),this.moveDown&&this.y+this.h<SI_GAME.data.h&&(this.y+=this.speed),this.moveUp&&this.y>0&&(this.y-=this.speed),SI_GAME.data.isMobile&&(this.moveUp=this.moveDown=this.moveRight=this.moveLeft=!1)}shipExplosion(){this.asset=SI_GAME.assets.explosion,this.w+=2.4,this.h+=.8,this.alpha-=.03,this.alpha<=0&&this.dispatchEvent(new Event("explosion"))}shot(){if(this.reload)return;let e=new Event("shot");e.x=this.x+this.w,e.y=this.y+Math.round(this.h/2),e.asset=this.eqWeapon.asset,e.speed=this.eqWeapon.speed,e.dmg=this.eqWeapon.damage,e.owner="p1",this.dispatchEvent(e),this.reload=!0,setTimeout(()=>this.reload=!1,this.eqWeapon.reloadTime)}}var o=r;class d extends EventTarget{constructor(e,t,s,i,n,h,a){super(),this.setVars(e,t,s,i,n,h,a)}setVars(e,t,s,i,n,h,a){this.ctx=e,this.img=t,this.x=s,this.y=i,this.speed=n,this.dmg=h,this.owner=a,this.w=.02*SI_GAME.data.w,this.h=.01*SI_GAME.data.h}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y),this.ctx.closePath(),this.update()}update(){if(this.x+=this.speed,this.x+this.w>SI_GAME.data.w||this.x<0||this.y+this.h>SI_GAME.data.h||this.y<0){let e=new Event("remove");this.dispatchEvent(e)}}}var l=d;EventTarget;var c={level1:{2:{type:"enemy",index:0,number:1,chaser:!0},7:{type:"enemy",index:0,number:2,chaser:!1},11:{type:"enemy",index:0,number:1,chaser:!0},12:{type:"enemy",index:0,number:1,chaser:!0},16:{type:"enemy",index:0,number:2,chaser:!0},19:{type:"enemy",index:0,number:1,chaser:!1},25:{type:"enemy",index:0,number:2,chaser:!1},27:{type:"enemy",index:0,number:2,chaser:!0},31:{type:"enemy",index:0,number:1,chaser:!0},32:{type:"enemy",index:0,number:1,chaser:!1},36:{type:"enemy",index:0,number:2,chaser:!0},41:{type:"enemy",index:0,number:2,chaser:!1},43:{type:"enemy",index:0,number:1,chaser:!0},46:{type:"enemy",index:0,number:1,chaser:!1},50:{type:"enemy",index:0,number:2,chaser:!1},55:{type:"enemy",index:0,number:1,chaser:!0},59:{type:"enemy",index:0,number:1,chaser:!0},60:{type:"enemy",index:0,number:1,chaser:!1}}};var p=class{constructor(){this.setVars(),this.setListeners()}setVars(){this.ctx=SI_GAME.data.ctx,this.bg=new a(this.ctx,SI_GAME.objects.background),this.ship=new o(this.ctx,SI_GAME.objects.playerShip),this.aliens=[],this.missles=[],this.score=0,this.timer=0,this.menu=document.querySelector(".menu"),this.newGameBtn=document.querySelector(".menu__new-game"),this.resumeBtn=document.querySelector(".menu__resume"),this.optionsBtn=document.querySelector(".menu__options"),this.exitBtn=document.querySelector(".menu__exit"),this.timerInterval=null,this.playState=!1,this.textWeaponX=20,this.textWeaponY=SI_GAME.data.h-20,this.textShieldX=20,this.textShieldY=SI_GAME.data.h-40,this.textScoreX=20,this.textScoreY=SI_GAME.data.h-60}setListeners(){this.handleShot=this.handleShot.bind(this),this.ship.addEventListener("shot",this.handleShot),this.handlePlayerExplosion=this.handlePlayerExplosion.bind(this),this.ship.addEventListener("explosion",this.handlePlayerExplosion),this.newGameBtn.addEventListener("click",e=>{this.timerInterval&&this.reset(),SI_GAME.data.isMobile&&(document.querySelector("main").requestFullscreen(),screen.orientation.lock("landscape")),this.start(c.level1),this.menu.classList.toggle("open")}),this.resumeBtn.addEventListener("click",e=>{this.resume(),this.menu.classList.toggle("open")}),this.toggleMenuHandler=this.toggleMenuHandler.bind(this),document.addEventListener("keydown",this.toggleMenuHandler)}toggleMenuHandler(e){27===e.keyCode&&(this.playState?this.pause():this.resume(),this.menu.classList.toggle("open"))}start(e){this.playState=!0,this.timerInterval=setInterval(()=>{if(this.playState){if(e[this.timer]){const{type:t,index:s,number:i,chaser:n}=e[this.timer];switch(t){case"enemy":for(let e=0;e<i;e++);}}this.timer++}},1e3),this.drawFrame()}pause(){this.playState=!1}resume(){this.playState=!0,this.drawFrame()}reset(){location.reload()}drawFrame(){this.ctx.clearRect(0,0,SI_GAME.data.w,SI_GAME.data.h),this.bg.draw(),this.ship.draw(),this.missles.forEach(e=>e.draw()),this.aliens.forEach(e=>e.draw()),this.drawStatus(),this.detectColisions(),this.playState&&requestAnimationFrame(()=>this.drawFrame())}drawStatus(){this.ctx.beginPath(),this.ctx.font="18px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(`Shield: ${Math.max(0,this.ship.shield)}%`,this.textShieldX,this.textShieldY),this.ctx.fillText(`Weapon: ${this.ship.eqWeapon.name}`,this.textWeaponX,this.textWeaponY),this.ctx.fillText(`Score: ${this.score}`,this.textScoreX,this.textScoreY),this.ctx.closePath()}handleShot(e){let t=new l(this.ctx,e.asset,e.x,e.y,e.speed,e.dmg,e.owner);this.missles.push(t);let s=e=>{this.missles.splice(this.missles.indexOf(t),1),t.removeEventListener("remove",s)};t.addEventListener("remove",s)}handlePlayerExplosion(e){console.log("game over")}handleAlienExplosion(e){this.aliens.splice(this.aliens.indexOf(e.target),1),this.score+=e.target.reward}detectColisions(){this.missles.forEach((e,t)=>{"npc"===e.owner&&e.x<this.ship.x+this.ship.w&&e.x>this.ship.x&&e.y<this.ship.y+this.ship.h&&e.y>this.ship.y?(this.ship.shield-=e.dmg,this.missles.splice(t,1)):"p1"===e.owner&&this.aliens.forEach((s,i)=>{e.x+e.w>s.x&&e.x<s.x+s.w&&e.y+e.h>s.y&&e.y<s.y+s.h&&(s.shield-=e.dmg,this.missles.splice(t,1))})})}};(function(e){return new Promise((t,s)=>{let i=Object.keys(e).length;const n={};for(let s in e)n[s]=new Image,n[s].onload=()=>{i--,0===i&&t(n)},n[s].src=e[s]})})({bg:"./assets/bg.png",ship:"./assets/ship.png",missle1:"./assets/missle1.png",alien1:"./assets/ship_a1.png",missle_a1:"./assets/missle_a1.png",explosion:"./assets/explo.png"}).then(e=>{window.SI_GAME={},SI_GAME.assets=e,SI_GAME.data=h,SI_GAME.objects=(e=>({background:{asset:e.bg,speed:.5},playerShip:{asset:e.ship,speed:2,shield:100},alienShips:[{asset:e.alien1,speed:1.2,shield:100,weapon:{name:"Blaster WTF-30",asset:e.missle_a1,damage:10,speed:3,reloadTime:1e3},reward:100}]}))(e),SI_GAME.weapons=(e=>[{name:"Blaster WTF-40",asset:e.missle1,damage:20,speed:4,reloadTime:100,charges:-1}])(e),SI_GAME.gameInstance=new p})}]);