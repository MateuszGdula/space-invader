!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e),window.SI_CANVAS=document.querySelector(".game"),window.SI_CTX=SI_CANVAS.getContext("2d");const i={w:SI_CANVAS.width,h:SI_CANVAS.height};var r=class{constructor(t,e,s,i){this.ctx=t,this.img=e,this.speed=s,this.cfg=i,this.x=0}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,0),this.ctx.drawImage(this.img,this.x+this.cfg.w,0),this.ctx.closePath(),this.x>-1*this.cfg.w?this.x-=this.speed:this.x=0}};class h extends EventTarget{constructor(t,e,s,i){super(),this.setVars(t,e,s,i),this.setListeners()}setVars(t,e,s,i){this.ctx=t,this.img=e,this.speed=s,this.cfg=i,this.x=10,this.y=this.cfg.h/2,this.w=100,this.h=33,this.rightPressed=!1,this.leftPressed=!1,this.upPressed=!1,this.downPressed=!1}setListeners(){this.keyDownHandler=this.keyDownHandler.bind(this),document.addEventListener("keydown",this.keyDownHandler),this.keyUpHandler=this.keyUpHandler.bind(this),document.addEventListener("keyup",this.keyUpHandler)}keyDownHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!0),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!0),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!0),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!0)," "===t.key&&this.shot()}keyUpHandler(t){("Right"==t.key||"ArrowRight"==t.key)&&(this.rightPressed=!1),("Left"==t.key||"ArrowLeft"==t.key)&&(this.leftPressed=!1),("Up"==t.key||"ArrowUp"==t.key)&&(this.upPressed=!1),("Down"==t.key||"ArrowDown"==t.key)&&(this.downPressed=!1)}draw(){this.ctx.beginPath(),this.ctx.drawImage(this.img,this.x,this.y,this.w,this.h),this.ctx.closePath(),this.update()}update(){this.rightPressed&&this.x+this.w<this.cfg.w&&(this.x+=this.speed),this.leftPressed&&this.x>0&&(this.x-=this.speed),this.downPressed&&this.y+this.h<this.cfg.h&&(this.y+=this.speed),this.upPressed&&this.y>0&&(this.y-=this.speed)}shot(t){console.log("bang bang bang"),this.dispatchEvent(new Event("shot"))}}var n=h;var o=class{constructor({bg:t,ship:e}){this.ctx=SI_CTX,this.cfg=i,this.bg=new r(this.ctx,t,.5,this.cfg),this.ship=new n(this.ctx,e,2,this.cfg),this.start()}start(){this.drawFrame()}pause(){}stop(){}reset(){}drawFrame(){this.ctx.clearRect(0,0,this.cfg.w,this.cfg.h),this.bg.draw(),this.ship.draw(),requestAnimationFrame(()=>this.drawFrame())}};(async function(t){return new Promise((e,s)=>{let i=Object.keys(t).length;const r={};for(let s in t)r[s]=new Image,r[s].onload=()=>{0===--i&&e(r)},r[s].src=t[s]})})({bg:"./assets/bg.png",ship:"./assets/ship.png"}).then(t=>{new o(t)})}]);